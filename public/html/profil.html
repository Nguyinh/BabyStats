<!DOCTYPE html>
<html lang='en'>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120675513-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-120675513-1');
    </script>

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-120675513-1', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- Required meta tags -->
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no'>

    <!-- Bootstrap CSS -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm' crossorigin='anonymous'>
    <link rel='stylesheet' type='text/css' href='../css/profil.css'>
    <link rel='stylesheet' type='text/css' href='../css/radiobutton.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <!-- https://afeld.github.io/emoji-css/ -->
    <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.min.css" />


    <title>Profil | BabyStats</title>
</head>

<body>

    <!-- NAVBAR -->
    <nav class='navbar navbar-expand-lg navbar-dark bg-dark'>
        <a class='navbar-brand' href='#'>BabyStats</a>
        <button class='navbar-toggler' type='button' data-toggle='collapse' data-target='#navbarNavAltMarkup' aria-controls='navbarNavAltMarkup' aria-expanded='false' aria-label='Toggle navigation'>
            <span class='navbar-toggler-icon'></span>
        </button>
        <div class='collapse navbar-collapse' id='navbarNavAltMarkup'>
            <div class='navbar-nav'>
                <a class='nav-item nav-link' href='../index.html'>Live match</a>
                <a class="nav-item nav-link" href="history.html">Historique</a>
                <a class='nav-item nav-link' href='statistiques.html'>Statistiques</a>
                <a class='nav-item nav-link' href='parametres.html'>Paramètres</a>
                <a class='nav-item nav-link active' href='#'>Profil<span class='sr-only'>(current)</span></a>
            </div>
        </div>
    </nav>

    <!--  LOG  -->
    <div class='row' style='margin-top: 1.5em;' id='log_user_container'>
        <div class='col-xl-4 offset-xl-4'>
            <div class='card' id='affiche_connect' style='display:none'>
                <h3 class='card-header'>Profil</h3>
                <div class='row'>
                    <div class='col-10 offset-1' style='padding-top: 1em;'>
                        <div class='row mb-3'>
                            <button type="button" class="btn btn-info btn-block mb-3" id='signin'>Se connecter</button>
                            <button type="button" class="btn btn-info btn-block mt-0" id='signup'>Créer un compte</button>
                        </div>

                        <div class='row mt-2' id='affiche_name' style='display:none'>
                            <div class="col-12">
                                <div class='row'>
                                    <div class="col-6 pl-0">
                                        <input type='text' class='form-control' placeholder='Prénom' aria-describedby='basic-addon1' id='name_input'>
                                    </div>
                                    <div class="col-6 pr-0">
                                        <input type='text' class='form-control' placeholder='Nom' aria-describedby='basic-addon1' id='lastname_input'>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class='row mt-2'>
                            <input type='text' class='form-control signin_form' placeholder=' E-mail' aria-describedby='basic-addon1' id='ID_input'>
                        </div>

                        <div class='row mt-2'>
                            <input type='password' class='form-control signin_form' placeholder=' Mot de passe' aria-describedby='basic-addon1' id='password_input'>
                        </div>

                        <div class='row mt-2' id='affiche_confirm' style='display:none'>
                            <input type='password' class='form-control' placeholder=' Confirmation de mot de passe' aria-describedby='basic-addon1' id='password_confirm_input'>
                        </div>

                        <div class='row' id='error_info' style='display:none'>
                            <p class='text-danger' id='error_message' style='display:none'> Classe danger - Rouge</p>
                        </div>
                        <div class='row mb-3'>
                            <button type='button' class='btn btn-primary btn-lg btn-block signin_form' style='margin-bottom: 1em; margin-top: 1em;' id='log_in'>Se connecter</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- CONNECTED -->
    <div class='row mt-4' style='display: none;' id='connected_container'>
        <div class='col-xl-4 offset-xl-4'>
            <!-- Welcome header -->
            <div class="row m-0">
                <div class="col-3 px-1">
                    <img id="profil_picture" src="../blank_profile.png" alt="pp" onclick="$('#imageUploadButton').click()" width="100%;" style="border-radius: 50%;">
                    <i class="fa fa-circle-o-notch fa-spin" style="font-size: 4rem; display: none;" id="load_icon"></i>
                </div>
                <div class="col-9">
                    <h3 style="text-align: left; vertical-align: bottom; font-family: 'Roboto', sans-serif; font-weight: Regular;" class="m-0 mt-1" id="welcome_message">Hey </h3>
                </div>

                <!-- <div class="col-12">
                    <hr class="mx-1 mt-3" />
                </div> -->
                <div class="collapse col-12 mt-3" id="cropper">
                    <div class="row">
                        <div class='col-10 offset-1 mb-2 mt-3'>
                            <button type='button' class='btn btn-success btn-lg btn-block' id="crop_button">Enregistrer</button>
                        </div>
                    </div>

                    <img src="../blank_profile.png" style="width: 100%;" id="img_to_crop">
                </div>
            </div>

            <!-- Link to player -->
            <div class="row mt-3" id="link_button_container" style="display: none;">
                <div class="col-10 ml-4 mb-3">
                    <h4 style="text-align: left;" class="profile_title">Vous n'avez pas de profil joueur</h4>
                </div>

                <div class="col-10 offset-1">
                    <button type='button' class='btn btn-success btn-lg btn-block' onclick="linkToPlayer()" id="link_button"><i class="em em-exclamation"></i> Lier mon compte <i class="em em-exclamation"></i></button>
                </div>

                <div class="col-12">
                    <hr class="mx-3 mt-3" />
                </div>
            </div>

            <!-- Re-activate player -->
            <div class="row mt-3" id="is_active_container" style="display: none;">
                <div class="col-10 ml-4 mb-3">
                    <h4 style="text-align: left;" class="profile_title">Vous êtes inactif</h4>
                </div>

                <div class="col-10 offset-1">
                    <button type='button' class='btn btn-dark btn-lg btn-block' onclick="setPlayerActive()" id="set_active_button" style="height: 4rem;">Revenir dans le game <i class="em em-muscle"></i><i class="em em-anger"></i></button>
                </div>

                <div class="col-12">
                    <hr class="mx-3 mt-3" />
                </div>
            </div>

            <div class="row m-0 mt-3" id="players_infos_container" style="display: none;">
                <!-- Total victories -->
                <div class="col-6 information_box odd_box top_box">
                    <p class="information_box_text"><strong id="total_wins">0</strong><br/><i class="em em-trophy"></i></p>
                    <p style="font-size: 1.15rem;"><strong>parties gagnées</strong></p>
                </div>

                <!-- Victories/defeats ratio -->
                <div class="col-6 information_box even_box top_box">
                    <canvas id="VD_ratio" class="mt-3"></canvas>
                    <p style="font-size: 1.15rem;" class="mt-2"><strong id="VD_ratio_text">Victoires/Défaites</strong></p>
                </div>

                <!-- Rank in league -->
                <div class="col-6 information_box even_box">
                    <p class="information_box_text"><strong id="ranking">1e</strong><br/><i class="em em-sports_medal"></i></p>
                    <p style="font-size: 1.15rem;"><strong>sur <span id="total_players_ranking">1 joueurs</span></strong></p>
                </div>

                <!-- Sweat amount -->
                <div class="col-6 information_box odd_box">
                    <p class="information_box_text"><strong id="sweat_amount">0L</strong><br/><i class="em em-sweat_drops"></i></p>
                    <p style="font-size: 1.15rem;"><strong>de sueur versée</strong></p>
                </div>

                <!-- Curse words -->
                <div class="col-6 information_box odd_box">
                    <p class="information_box_text"><strong id="curse_words">0</strong><br/><i class="em em-serious_face_with_symbols_covering_mouth"></i></p>
                    <p style="font-size: 1.15rem;"><strong>gros mots</strong></p>
                </div>

                <!-- Total games -->
                <div class="col-6 information_box even_box">
                    <p class="information_box_text"><strong id="total_games">0</strong><br/><i class="em em-crossed_swords"></i></p>
                    <p style="font-size: 1.15rem;"><strong>parties jouées</strong></p>
                </div>

                <!-- ELO graph -->
                <div class="col-12 information_box full_box">
                    <canvas id="ELO_curve" class="mt-3"></canvas>
                    <p style="font-size: 1.15rem;"><strong>Progression (WIP)</strong></p>
                </div>

                <!-- Broken wirsts -->
                <div class="col-6 information_box even_box">
                    <p class="information_box_text"><strong id="broken_wirsts">0</strong><br/><i class="em em-fist"></i><i class="em em-zap"></i></p>
                    <p style="font-size: 1.15rem;"><strong>poignets cassés</strong></p>
                </div>

                <!-- Total goals -->
                <div class="col-6 information_box odd_box">
                    <p class="information_box_text"><strong id="total_goals">0</strong><br/><i class="em em-soccer"></i></p>
                    <p style="font-size: 1.15rem;"><strong>buts marqués</strong></p>
                </div>

                <div class="col-12">
                    <hr class="mx-3 mt-3" />
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-10 ml-3 mb-3">
                    <h4 class="profile_title">Se déconnecter</h4>
                </div>
            </div>

            <!-- Log out -->
            <div class='row'>
                <div class='col-10 offset-1'>
                    <button type='button' class='btn btn-warning btn-lg btn-block' id='log_out' style="height: 4rem;">Byebye <i class="em em-man-raising-hand"></i></button>
                </div>

                <div class="col-12">
                    <hr class="mx-3 mt-3" />
                </div>
            </div>
        </div>
    </div>


    <!-- Upload file button hidden -->
    <input type="file" value="upload" id="imageUploadButton" class="d-none"></input>



    <div class='row' id="admin_container" style="display:none;">
        <div class='col-xl-4 offset-xl-4'>
            <div class="row mt-3">
                <div class="col-10 ml-3 mb-3">
                    <h4 class="profile_title">Administrateur <i class="em em-crown"></i></h4>
                </div>
            </div>

            <!-- New season -->
            <div class='row' id="new_season_container">
                <div class='col-10 offset-1'>
                    <button type='button' class='btn btn-danger btn-lg btn-block' id='new_season_button'>Démarrer nouvelle saison</button>
                </div>
            </div>

            <!-- Players active/inactive -->
            <div class="row mt-3" id="players_status_container">
                <div class="col-10 offset-1">
                    <button type='button' class='btn btn-danger btn-lg btn-block' id='players_status_button'>Inactivité joueurs</button>
                </div>
            </div>
        </div>
    </div>



    <!--  HISTORY  -->
    <div class="row mt-4" style="margin-right: 2px; margin-left: 2px; display:none;" id="submit_card">
        <div class="col-xl-4 offset-xl-4" style="padding-right: 0px; padding-left: 0px;">
            <div class="card" id="history_container" unselectable="on" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;">
                <h3 class="card-header">Soumis à suppression</h3>
                <div id="history">


                </div>
            </div>
        </div>
    </div>


    <!--  TEMPLATE  -->
    <div id="template" class="match_container pt-4">
        <div class="row align-items-center">
            <div class="col-5 pr-4">
                <div id="status_team1" class="mb-2"></div>
                <div>
                    <p id="player1"></p>
                </div>
                <div>
                    <p id="player2"></p>
                </div>
            </div>

            <div class="col-2 p-0" id="scores">
                <div class="row justify-content-between align-items-center">
                    <p id="team1score" class="m-0 p-0 col-6" style="border-right:1px solid #bababa;"></p>
                    <p id="team2score" class="m-0 p-0 col-6" style="border-left:1px solid #bababa;"></p>
                </div>
            </div>
            <div class="col-5 pl-4">
                <div id="status_team2" class="mb-2"></div>
                <div>
                    <p id="player3"></p>
                </div>
                <div>
                    <p id="player4"></p>
                </div>
            </div>
        </div>

        <div class="row justify-content-end">
            <div class="col-6 mr-2">
                <p id="timestamp" class="m-0 mb-1 mt-1" style="text-align: right;"></p>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <p id="reason" class="reason my-1 p-2 px-4"></p>
            </div>
        </div>

        <div class="row my-3">
            <div class="col-12">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-danger btn-lg" id="delete_button">Supprimer</button>
                    <button type="button" class="btn btn-success btn-lg" id="restore_button">Restaurer</button>
                </div>
            </div>
        </div>
    </div>


    <script src='https://www.gstatic.com/firebasejs/4.9.0/firebase.js'></script>
    <script src='https://www.gstatic.com/firebasejs/4.9.0/firebase-app.js'></script>
    <script src='https://www.gstatic.com/firebasejs/4.9.1/firebase-auth.js'></script>
    <script src='https://www.gstatic.com/firebasejs/4.9.0/firebase-firestore.js'></script>
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-storage.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: 'AIzaSyC9YNHO1_eQOfgSQp5IifQj2fzrf5u3Hik',
            authDomain: 'babystats-df22b.firebaseapp.com',
            databaseURL: 'https://babystats-df22b.firebaseio.com',
            projectId: 'babystats-df22b',
            storageBucket: 'babystats-df22b.appspot.com',
            messagingSenderId: '892281132936'
        };
        firebase.initializeApp(config);
    </script>
    <script src='https://code.jquery.com/jquery-3.3.1.js' crossorigin='anonymous'></script>
    <script src='https://code.jquery.com/ui/1.12.1/jquery-ui.js'></script>
    <script src="https://unpkg.com/sweetalert2@7.12.15/dist/sweetalert2.all.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/locale/fr.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js' integrity='sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q' crossorigin='anonymous'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js' integrity='sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl' crossorigin='anonymous'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.min.js"></script>
    <script src='../js/profil.js'></script>
</body>

</html>